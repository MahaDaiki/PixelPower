<div class="min-h-screen flex items-center justify-center relative  ">
  <div class="pixelated-bg absolute inset-0 w-full h-full z-[-1]">
    <img src="Profile.gif" alt="Background Image" class="pixelated absolute transform scale-120 inset-0 w-full h-full object-cover fixed z-[-1]" />
  </div>

  <div class="w-full max-w-7xl mx-auto my-8 px-4  ">
    <div class="pixelated-form rounded-lg shadow-lg overflow-hidden">

      <div class="p-3 bg-[rgba(20,10,40,0.9)] border-b-2 border-[#3f51b5]">
        <div class="flex items-center gap-2">
          <div class="w-3 h-3 rounded-full bg-red-500"></div>
          <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
          <div class="w-3 h-3 rounded-full bg-green-500"></div>
          <div class="flex-1 ml-2 px-2 py-1 rounded bg-black/50 text-xs text-cyan-300 font-mono border border-[#3f51b5]">
            https://pixelpower/admin/dashboard
          </div>
        </div>
      </div>

      <!-- Content -->
      <div class="p-6 overflow-y-auto max-h-[80vh] scrollbar-thin scrollbar-thumb-[#3f51b5] scrollbar-track-black/30">
        <h2 class="text-3xl font-bold mb-6 text-center pixel-title">ADMIN PANEL</h2>

        <!-- Users Section -->
        <div class="mb-8 bg-black/30 border-2 border-[#3f51b5] rounded-md p-5 relative overflow-hidden">
          <div class="scan-line"></div>
          <h3 class="text-xl mb-4 pixel-text flex items-center">
            <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z" fill="#00bcd4" />
              <path d="M12 14c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="#00bcd4" />
            </svg>
            USERS
          </h3>
          <div class="overflow-x-auto">
            <table class="w-full text-gray-200 font-mono">
              <thead>
              <tr class="bg-[rgba(63,81,181,0.3)] text-cyan-300">
                <th class="px-4 py-2 text-left border-b-2 border-[#3f51b5]">ID</th>
                <th class="px-4 py-2 text-left border-b-2 border-[#3f51b5]">USERNAME</th>
                <th class="px-4 py-2 text-left border-b-2 border-[#3f51b5]">EMAIL</th>
                <th class="px-4 py-2 text-center border-b-2 border-[#3f51b5]">ACTIONS</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let user of users" class="hover:bg-blue-900/20 transition-colors">
                <td class="px-4 py-2 border-b border-blue-800/50">{{ user.id }}</td>
                <td class="px-4 py-2 border-b border-blue-800/50">{{ user.username }}</td>
                <td class="px-4 py-2 border-b border-blue-800/50">{{ user.email }}</td>
                <td class="px-4 py-2 border-b border-blue-800/50 text-center">
                  <button (click)="openDeleteModal('user', user)" class="bg-black/50 border border-red-500 text-red-400 px-3 py-1 rounded font-mono text-xs hover:bg-red-900/30 transition-all duration-300 hover:scale-105 flex items-center gap-1 mx-auto btn-glint">
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none">
                      <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z" fill="#f44336" />
                      <path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" fill="#f44336" />
                      <path d="M10 9h1v8h-1zm3 0h1v8h-1z" fill="#ffffff" />
                    </svg>
                    DELETE
                  </button>
                </td>
              </tr>
              <tr *ngIf="!users || users.length === 0">
                <td colspan="4" class="px-4 py-4 text-center text-cyan-300">No users found.</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Reviews Section -->
        <div class="bg-black/30 border-2 border-[#3f51b5] rounded-md p-5 relative overflow-hidden">
          <div class="scan-line"></div>
          <h3 class="text-xl mb-4 pixel-text flex items-center">
            <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none">
              <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" fill="#00bcd4" />
              <path d="M6 14h12v2H6zm0-3h12v2H6zm0-3h12v2H6z" fill="#3f51b5" />
            </svg>
            REVIEWS
          </h3>
          <div class="overflow-x-auto">
            <table class="w-full text-gray-200 font-mono">
              <thead>
              <tr class="bg-[rgba(63,81,181,0.3)] text-cyan-300">
                <th class="px-4 py-2 text-left border-b-2 border-[#3f51b5]">ID</th>
                <th class="px-4 py-2 text-left border-b-2 border-[#3f51b5]">GAME</th>
                <th class="px-4 py-2 text-left border-b-2 border-[#3f51b5]">REVIEWER</th>
                <th class="px-4 py-2 text-left border-b-2 border-[#3f51b5]">COMMENT</th>
                <th class="px-4 py-2 text-center border-b-2 border-[#3f51b5]">ACTIONS</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let review of reviews" class="hover:bg-blue-900/20 transition-colors">
                <td class="px-4 py-2 border-b border-blue-800/50">{{ review.id }}</td>
                <td class="px-4 py-2 border-b border-blue-800/50">{{ review.gameName }}</td>
                <td class="px-4 py-2 border-b border-blue-800/50">{{ review.user.username  }}</td>
                <td class="px-4 py-2 border-b border-blue-800/50 max-w-xs truncate">{{ review.comment }}</td>
                <td class="px-4 py-2 border-b border-blue-800/50 text-center">
                  <button (click)="openDeleteModal('review', review)" class="bg-black/50 border border-red-500 text-red-400 px-3 py-1 rounded font-mono text-xs hover:bg-red-900/30 transition-all duration-300 hover:scale-105 flex items-center gap-1 mx-auto btn-glint btn-glint-delay">
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none">
                      <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z" fill="#f44336" />
                      <path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" fill="#f44336" />
                      <path d="M10 9h1v8h-1zm3 0h1v8h-1z" fill="#ffffff" />
                    </svg>
                    DELETE
                  </button>
                </td>
              </tr>
              <tr *ngIf="!reviews || reviews.length === 0">
                <td colspan="5" class="px-4 py-4 text-center text-cyan-300">No reviews found.</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div *ngIf="showDeleteModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn" (click)="closeDeleteModal($event)">
    <div class="pixelated-form w-[90%] max-w-sm animate-modalSlideIn" (click)="$event.stopPropagation()">
      <div class="flex justify-between items-center p-4 bg-[rgba(63,81,181,0.2)] border-b-2 border-[#3f51b5] relative z-10">
        <h3 class="pixel-text">CONFIRM DELETE</h3>
        <button class="w-7 h-7 bg-black/50 border-2 border-[#3f51b5] rounded-full text-cyan-300 flex items-center justify-center hover:bg-[rgba(63,81,181,0.3)] hover:scale-110 transition-all close-modal" (click)="closeDeleteModal($event)">Ã—</button>
      </div>
      <div class="p-5 relative z-10">
        <div class="flex items-start gap-3 bg-[rgba(255,152,0,0.2)] border-2 border-[#ff9800] rounded p-4 relative overflow-hidden">
          <div class="absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-[#ff9800] to-transparent animate-scanLine"></div>
          <div class="w-6 h-6 bg-[#ff9800] text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">!</div>
          <div class="text-gray-200 font-mono leading-relaxed">
            Are you sure you want to delete this {{ deleteType }}?
            <div *ngIf="deleteType === 'user'" class="mt-2 text-cyan-300">
              <strong>Username:</strong> {{ itemToDelete?.username }}
            </div>
            <div *ngIf="deleteType === 'review'" class="mt-2 text-cyan-300">
              <strong>Game:</strong> {{ itemToDelete?.gameName }}<br>
              <strong>By:</strong> {{ itemToDelete?.reviewer }}
            </div>
            <div class="mt-2 text-red-400">This action cannot be undone.</div>
          </div>
        </div>

        <div class="flex justify-between mt-6">
          <button class="bg-black/50 border-2 border-[#3f51b5] text-cyan-300 px-4 py-2 rounded font-mono font-bold hover:bg-[rgba(63,81,181,0.2)] hover:-translate-y-0.5 hover:shadow-[0_5px_15px_rgba(0,188,212,0.3)] transition-all btn-glint cancel-btn" (click)="closeDeleteModal($event)">
            <span class="flex items-center gap-1 relative z-10">
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="#00bcd4" />
              </svg>
              CANCEL
            </span>
          </button>
          <button class="bg-black/50 border-2 border-[#f44336] text-red-400 px-4 py-2 rounded font-mono font-bold hover:bg-[rgba(244,67,54,0.2)] hover:-translate-y-0.5 hover:shadow-[0_5px_15px_rgba(244,67,54,0.3)] transition-all btn-glint btn-glint-delay disabled:opacity-60 disabled:cursor-not-allowed" [disabled]="deleteLoading" (click)="confirmDelete()">
            <span class="flex items-center gap-1 relative z-10">
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none">
                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z" fill="#f44336" />
                <path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" fill="#f44336" />
              </svg>
              {{ deleteLoading ? 'DELETING...' : 'DELETE' }}
            </span>
          </button>
        </div>

        <div *ngIf="deleteError" class="flex items-center gap-3 bg-[rgba(244,67,54,0.2)] border-2 border-[#f44336] rounded p-4 mt-4 animate-errorPulse">
          <div class="w-6 h-6 bg-[#f44336] text-white rounded-full flex items-center justify-center font-bold">!</div>
          <div class="text-[#f44336] font-mono font-bold">{{ deleteError }}</div>
        </div>
      </div>
    </div>
  </div>
</div>

