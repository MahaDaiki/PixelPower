<div class="min-h-screen flex items-center justify-center relative ">
  <!-- Fixed Background Image -->
  <div class="pixelated-bg absolute inset-0 w-full h-full z-[-1]">
    <img src="Profile.gif" alt="Background Image" class="pixelated absolute inset-0 w-full h-full object-cover z-[-1]" />
  </div>


  <div class="profile-container">
    <!-- Browser-like container -->
    <div class="browser-container pixelated-form form-animate rounded-lg shadow-lg">
      <!-- Browser navigation bar -->
      <div class="browser-nav">
        <div class="browser-controls flex items-center gap-2 mb-2">
          <div class="browser-dot bg-red-500"></div>
          <div class="browser-dot bg-yellow-500"></div>
          <div class="browser-dot bg-green-500"></div>
          <div class="browser-address-bar flex-1 ml-2 px-2 py-1 rounded bg-black bg-opacity-50 text-xs text-cyan-300 font-mono">
            https:/PixelPower/profile/{{ user?.username || 'unknown' }}
          </div>
        </div>
      </div>

      <!-- Content -->
      <div class="browser-content p-6">
        <h2 class="font-bold text-center pixel-title mb-6">USER PROFILE</h2>

        <!-- Loading state -->
        <div *ngIf="!user && !error" class="loading-container">
          <div class="pixel-avatar loading-avatar">
            <div class="loading-scan"></div>
          </div>
          <div class="loading-text pixel-text">SCANNING USER DATA...</div>
          <div class="loading-bar">
            <div class="loading-progress"></div>
          </div>
          <div class="loading-details">
            <div class="loading-line"></div>
            <div class="loading-line"></div>
            <div class="loading-line"></div>
          </div>
        </div>

        <!-- Error state -->
        <div *ngIf="error" class="error-container">
          <div class="error-icon">!</div>
          <div class="error-message">{{ error.message || 'Failed to load profile' }}</div>
          <div class="error-code">ERROR CODE: {{ error.status || 'UNKNOWN' }}</div>
          <button class="retry-button" (click)="ngOnInit()">RETRY</button>
        </div>

        <!-- Profile content -->
        <div *ngIf="user" class="profile-content">
          <div class="profile-header">
            <div class="avatar-container">
              <div class="pixel-avatar" (click)="openAvatarModal()">
                <img [src]="'http://localhost:8080/uploads/profile_pictures/' + user.profilePicture" alt="Profile Picture" class="avatar-image">
                <div class="avatar-frame"></div>
                <div class="avatar-glow"></div>
                <div class="avatar-edit-overlay">
                  <span class="edit-icon">‚úèÔ∏è</span>
                </div>
              </div>
              <div class="role-badge">{{ user.role }}</div>
            </div>

            <div class="user-info">
              <h3 class="username pixel-text">{{ user.username }}</h3>
              <div class="user-status online">
                ONLINE
              </div>
              <div class="user-meta">
                <div class="meta-item">
                  <span class="meta-icon">üìß</span>
                  <span class="meta-value">{{ user.email }}</span>
                </div>
                <div class="meta-item">
                  <span class="meta-icon">‚åö</span>
                  <span class="meta-value">Member since {{ user.createdAt | date:'yyyy-MM-dd' }}</span>
                </div>
                <div class="meta-item">
                  <span class="meta-icon">üÜî</span>
                  <span class="meta-value">ID: {{ user.id }}</span>
                </div>
              </div>
              <button class="edit-profile-btn" (click)="openProfileModal()">EDIT PROFILE</button>
            </div>
          </div>

          <!-- My Configuration Section -->
          <div class="profile-section">
            <div class="section-header pixel-text">MY CONFIGURATION</div>
            <div class="config-grid">
              <div class="config-item">
                <div class="config-icon">üñ•Ô∏è</div>
                <div class="config-details">
                  <div class="config-name">System</div>
                  <div class="config-value">Windows 11 Pro</div>
                </div>
              </div>
              <div class="config-item">
                <div class="config-icon">üéÆ</div>
                <div class="config-details">
                  <div class="config-name">GPU</div>
                  <div class="config-value">RTX 4080</div>
                </div>
              </div>
              <div class="config-item">
                <div class="config-icon">üß†</div>
                <div class="config-details">
                  <div class="config-name">CPU</div>
                  <div class="config-value">Intel i9-13900K</div>
                </div>
              </div>
              <div class="config-item">
                <div class="config-icon">üíæ</div>
                <div class="config-details">
                  <div class="config-name">RAM</div>
                  <div class="config-value">32GB DDR5</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Comparison History Section -->
          <div class="profile-section">
            <div class="section-header pixel-text">COMPARISON HISTORY</div>
            <div class="comparison-list">
              <div class="comparison-item">
                <div class="comparison-date">2025-03-10</div>
                <div class="comparison-details">
                  <div class="comparison-title">RTX 4080 vs RTX 4090</div>
                  <div class="comparison-tags">
                    <span class="comparison-tag">GPU</span>
                    <span class="comparison-tag">Gaming</span>
                  </div>
                </div>
                <button class="view-btn">VIEW</button>
              </div>
              <div class="comparison-item">
                <div class="comparison-date">2025-03-05</div>
                <div class="comparison-details">
                  <div class="comparison-title">i9-13900K vs Ryzen 9 7950X</div>
                  <div class="comparison-tags">
                    <span class="comparison-tag">CPU</span>
                    <span class="comparison-tag">Productivity</span>
                  </div>
                </div>
                <button class="view-btn">VIEW</button>
              </div>
              <div class="comparison-item">
                <div class="comparison-date">2025-02-28</div>
                <div class="comparison-details">
                  <div class="comparison-title">DDR4 vs DDR5 Memory</div>
                  <div class="comparison-tags">
                    <span class="comparison-tag">RAM</span>
                    <span class="comparison-tag">Performance</span>
                  </div>
                </div>
                <button class="view-btn">VIEW</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Profile Edit Modal -->
  <!-- Profile Edit Modal -->
  <div *ngIf="showProfileModal" class="modal-overlay" (click)="closeProfileModal($event)">
    <div class="modal-container pixelated-form">
      <div class="modal-header">
        <h3 class="pixel-text">EDIT PROFILE</h3>
        <button class="close-modal" (click)="closeProfileModal($event)">√ó</button>
      </div>

      <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>

      <div class="modal-content">
        <!-- Important: [formGroup] binding was likely missing -->
        <form [formGroup]="profileForm" (ngSubmit)="updateProfile($event)">
          <div class="form-group">
            <label class="form-label">Username</label>
            <!-- Important: formControlName instead of direct binding -->
            <input type="text" class="form-input" formControlName="username">
            <p *ngIf="profileForm.get('username')?.invalid && profileForm.get('username')?.touched" class="error-text">
              Username is required.
            </p>
          </div>
          <div class="form-group">
            <label class="form-label">Email</label>
            <!-- Important: formControlName instead of direct binding -->
            <input type="email" class="form-input" formControlName="email">
            <p *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched" class="error-text">
              Enter a valid email.
            </p>
          </div>
          <div class="form-actions">
            <button type="button" class="cancel-btn" (click)="closeProfileModal($event)">CANCEL</button>
            <button type="submit" class="save-btn" [disabled]="profileForm.invalid">SAVE CHANGES</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Avatar Selection Modal -->
  <!-- Avatar Selection Modal -->
  <div *ngIf="showAvatarModal" class="modal-overlay" (click)="closeAvatarModal($event)">
    <div class="modal-container pixelated-form">
      <div class="modal-header">
        <h3 class="pixel-text">CHOOSE OR UPLOAD AVATAR</h3>
        <button class="close-modal" (click)="closeAvatarModal($event)">√ó</button>
      </div>
      <div class="modal-content">
        <!-- Avatar selection -->
        <div class="avatars-grid">
          <div *ngFor="let avatar of availableAvatars"
               class="avatar-option"
               [class.selected]="selectedAvatar === avatar"
               (click)="selectAvatar(avatar)">
            <img [src]="avatar" alt="Avatar option" class="avatar-option-img">
          </div>
        </div>

        <!-- Upload custom image -->
        <div class="upload-container">
          <label for="avatarUpload" class="upload-label">Upload an image</label>
          <input type="file" id="avatarUpload" (change)="onFileSelected($event)" accept="image/*">
        </div>

        <div class="form-actions">
          <button type="button" class="cancel-btn" (click)="closeAvatarModal($event)">CANCEL</button>
          <button type="button" class="save-btn" (click)="updateAvatar()">SAVE AVATAR</button>
        </div>
      </div>
    </div>
  </div>




